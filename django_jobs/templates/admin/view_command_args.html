{% extends "admin/base_site.html" %}

{% block title %}{{ title }}{% endblock %}

{% block extrahead %}
<style>
    .arguments-container {
        margin: 20px 0;
        padding: 15px;
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    .arguments-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
    }
    .arguments-table th,
    .arguments-table td {
        padding: 10px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    .arguments-table th {
        background-color: #f5f5f5;
        font-weight: bold;
    }
    .argument-name {
        font-family: monospace;
        background-color: #e9ecef;
        padding: 2px 4px;
        border-radius: 3px;
    }
    .choices-list {
        margin: 5px 0;
        padding-left: 20px;
    }
    .no-args {
        color: #666;
        font-style: italic;
    }
</style>
{% endblock %}

{% block content %}
<h1>{{ title }}</h1>

<div class="arguments-container">
    <h2>Command: {{ command.command_name }}</h2>
    
    {% if args %}
        <table class="arguments-table">
            <thead>
                <tr>
                    <th>Argument</th>
                    <th>Description</th>
                    <th>Required</th>
                    <th>Default</th>
                    <th>Type</th>
                    <th>Choices</th>
                </tr>
            </thead>
            <tbody>
                {% for arg in args %}
                    {% if arg.error %}
                        <tr>
                            <td colspan="6" style="color: red;">Error: {{ arg.error }}</td>
                        </tr>
                    {% else %}
                        <tr>
                            <td><span class="argument-name">{{ arg.name }}</span></td>
                            <td>{{ arg.help|default:"-" }}</td>
                            <td>{% if arg.required %}<strong>Yes</strong>{% else %}No{% endif %}</td>
                            <td>{{ arg.default|default:"-" }}</td>
                            <td>{{ arg.type|default:"-" }}</td>
                            <td>
                                {% if arg.choices %}
                                    <ul class="choices-list">
                                        {% for choice in arg.choices %}
                                            <li>{{ choice }}</li>
                                        {% endfor %}
                                    </ul>
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                        </tr>
                    {% endif %}
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="no-args">No arguments available for this command.</p>
    {% endif %}
</div>

<div>
    <a href="{% url 'admin:django_jobs_commandschedule_changelist' %}" class="button">Back to command schedules</a>
</div>
{% endblock %}